<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adaptive Works - Job Portal</title>
    <link rel="stylesheet" href="Adaptive.css">
</head>
<body>
    <!-- Header Section -->
    <header id="main-header">
        <nav>
            <div class="logo">
                <h1>Adaptive Works</h1>
                <p>Your Gateway to Better Job Opportunities</p>
            </div>
            <ul id="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#services">Services</a></li>
                <li><a href="#contact">Contact</a></li>

                <!-- Dynamic links (controlled by JS) -->
                <li id="register-link"><a href="register.html">Register</a></li>
                <li id="login-link"><a href="login.html">Login</a></li>
                <li id="employer-link" style="display:none;"><a href="employer.html">Employer Dashboard</a></li>
                <li id="employee-link" style="display:none;"><a href="employee.html">Employee Dashboard</a></li>
                <li id="admin-link" style="display:none;"><a href="admin.html">Admin Dashboard</a></li>
                <li id="logout-link" style="display:none;"><a href="#">Logout</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <!-- Home Section -->
        <section id="home" class="hero">
            <div class="hero-content">
                <h2>Find Your Dream Job Today</h2>
                <p>Connecting talent with opportunity. Explore thousands of jobs with one simple search.</p>
                <a href="register.html" class="cta-button">Get Started</a>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="container reveal">
            <h2>About Us</h2>
            <p>Adaptive Works is a modern job portal designed to bridge the gap between talented professionals and innovative companies. Our mission is to simplify the hiring process and make it more efficient for both job seekers and employers.</p>
        </section>

        <!-- Services Section -->
        <section id="services" class="container reveal">
            <h2>Our Services</h2>
            <div class="service-cards">
                <div class="card">
                    <h3>For Job Seekers</h3>
                    <p>Advanced search filters, personalized job recommendations, and an easy application process.</p>
                </div>
                <div class="card">
                    <h3>For Employers</h3>
                    <p>Post job openings, manage applications, and find the perfect candidates for your team.</p>
                </div>
                <div class="card">
                    <h3>Career Advice</h3>
                    <p>Access resources and articles to help you advance in your professional journey.</p>
                </div>
            </div>
        </section>
        
        <!-- Contact Section -->
        <section id="contact" class="container reveal">
            <h2>Contact Us</h2>
            <form id="contactForm">
                <input type="text" id="contactName" placeholder="Your Name" required>
                <input type="email" id="contactEmail" placeholder="Your Email" required>
                <textarea id="contactMessage" placeholder="Your Message" required></textarea>
                <button type="submit">Send Message</button>
            </form>
        </section>
    </main>
    
    <!-- Footer -->
    <footer>
        <p>&copy; 2025 Adaptive Works. All rights reserved.</p>
    </footer>

    <!-- Scroll-to-top Button -->
    <button id="scrollToTopBtn">↑</button>

    <script src="Adaptive.js"></script>
    <script>
      const API_BASE_URL = "http://localhost:8080/api";

      document.getElementById("contactForm").addEventListener("submit", async (e) => {
        e.preventDefault();
        const name = document.getElementById("contactName").value;
        const email = document.getElementById("contactEmail").value;
        const message = document.getElementById("contactMessage").value;

        try {
          const res = await fetch(`${API_BASE_URL}/contact`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ name, email, message })
          });
          
          if (res.ok) {
            alert("✅ Message sent successfully!");
            document.getElementById("contactForm").reset();
          } else {
            alert("❌ Failed to send message.");
          }
        } catch (error) {
          console.error("Contact form error:", error);
          alert("❌ An error occurred. Please try again.");
        }
      });
      
      function updateNavbar() {
        const token = localStorage.getItem("token");
        const user = JSON.parse(localStorage.getItem("user"));

        if (!token || !user) {
          document.getElementById("register-link").style.display = "inline";
          document.getElementById("login-link").style.display = "inline";
          document.getElementById("employer-link").style.display = "none";
          document.getElementById("employee-link").style.display = "none";
          document.getElementById("admin-link").style.display = "none";
          document.getElementById("logout-link").style.display = "none";
        } else {
          document.getElementById("register-link").style.display = "none";
          document.getElementById("login-link").style.display = "none";
          document.getElementById("logout-link").style.display = "inline";

          if (user.role === "employer") {
            document.getElementById("employer-link").style.display = "inline";
          } else if (user.role === "employee") {
            document.getElementById("employee-link").style.display = "inline";
          } else if (user.role === "admin") {
            document.getElementById("admin-link").style.display = "inline";
          }
        }
      }

      document.getElementById("logout-link").addEventListener("click", () => {
        localStorage.removeItem("token");
        localStorage.removeItem("user");
        updateNavbar();
        window.location.href = "index.html";
      });

      updateNavbar();
    </script>
</body>
</html>

